import{r as o,j as e,a as g}from"./app-DM5lWH7w.js";import{D as E,a as N,b as S,c as w}from"./dialog-_yQDYPAD.js";import{B as v}from"./button-D_azY7HU.js";import{I as C}from"./input-C9qzQYtQ.js";import{L as b}from"./label-Dh85IkX1.js";import{A as F,a as T}from"./alert-cZJMHzEk.js";import"./index-v8iwHGUi.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./index-H22tECQ6.js";function J({color:r,onClose:c,onSuccess:y}){const[a,l]=o.useState({name:"",colorCode:"#000000"}),[m,d]=o.useState(!1),[i,p]=o.useState({}),[h,u]=o.useState("");o.useEffect(()=>{r&&l({name:r.name||"",colorCode:r.description||"#000000"})},[r]);const D=async t=>{var x,f;t.preventDefault(),d(!0),p({}),u("");try{const s={...a,description:a.colorCode};if(r){const j={};Object.keys(s).forEach(n=>{s[n]!==r[n]&&(j[n]=s[n])}),await g.post(`/admin/colors/${r.id}`,j)}else await g.post("/admin/colors",s);y()}catch(s){(f=(x=s.response)==null?void 0:x.data)!=null&&f.errors?p(s.response.data.errors):u("An error occurred while saving the color. Please try again."),console.error("Error submitting color:",s)}finally{d(!1)}};return e.jsx(E,{open:!0,onOpenChange:c,children:e.jsxs(N,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(S,{children:e.jsx(w,{children:r?"Cập nhật":"Thêm mới"})}),h&&e.jsx(F,{variant:"destructive",children:e.jsx(T,{children:h})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"Tên màu"}),e.jsx(C,{id:"name",value:a.name,onChange:t=>l({...a,name:t.target.value}),required:!0}),i.name&&e.jsx("span",{className:"text-red-500 text-sm",children:i.name})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"colorCode",children:"Chọn màu"}),e.jsx(C,{id:"colorCode",type:"color",value:a.colorCode,onChange:t=>l({...a,colorCode:t.target.value})}),i.description&&e.jsx("span",{className:"text-red-500 text-sm",children:i.description})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:c,disabled:m,children:"Hủy"}),e.jsx(v,{type:"submit",disabled:m,className:"min-w-[100px]",children:m?"Đang lưu...":r?"Cập nhật":"Tạo mới"})]})]})]})})}export{J as default};
