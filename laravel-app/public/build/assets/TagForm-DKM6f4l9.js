import{r as n,j as e,a as j}from"./app-DM5lWH7w.js";import{D as y,a as C,b as F,c as A}from"./dialog-_yQDYPAD.js";import{B as v}from"./button-D_azY7HU.js";import{I as b}from"./input-C9qzQYtQ.js";import{L as D}from"./label-Dh85IkX1.js";import{A as L,a as T}from"./alert-cZJMHzEk.js";import"./index-v8iwHGUi.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./index-H22tECQ6.js";function K({tag:s,onClose:u,onSuccess:N}){const[i,m]=n.useState({name:"",slug:""}),[d,p]=n.useState(!1),[l,g]=n.useState({}),[x,h]=n.useState("");n.useEffect(()=>{s&&m({name:s.name||"",slug:s.slug||""})},[s]);const w=async r=>{var t,o;r.preventDefault(),p(!0),g({}),h("");try{const a={...i};if(s){const f={};Object.keys(a).forEach(c=>{a[c]!==s[c]&&(f[c]=a[c])}),await j.post(`/admin/tags/${s.id}`,f)}else await j.post("/admin/tags",a);N()}catch(a){(o=(t=a.response)==null?void 0:t.data)!=null&&o.errors?g(a.response.data.errors):h("An error occurred while saving the tag. Please try again."),console.error("Error submitting tag:",a)}finally{p(!1)}},E=r=>r.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),S=r=>{const t=r.target.value;m(o=>({...o,name:t,slug:E(t)}))};return e.jsx(y,{open:!0,onOpenChange:u,children:e.jsxs(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(F,{children:e.jsx(A,{children:s?"Edit Tag":"Add New Tag"})}),x&&e.jsx(L,{variant:"destructive",children:e.jsx(T,{children:x})}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"name",children:"Name"}),e.jsx(b,{id:"name",value:i.name,onChange:S,required:!0}),l.name&&e.jsx("span",{className:"text-red-500 text-sm",children:l.name})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"slug",children:"Slug"}),e.jsx(b,{id:"slug",value:i.slug,onChange:r=>m({...i,slug:r.target.value}),required:!0}),l.slug&&e.jsx("span",{className:"text-red-500 text-sm",children:l.slug})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:u,disabled:d,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:d,className:"min-w-[100px]",children:d?"Saving...":s?"Update":"Create"})]})]})]})})}export{K as default};
