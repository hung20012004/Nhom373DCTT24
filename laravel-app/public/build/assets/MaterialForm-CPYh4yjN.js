import{r as i,j as e,a as j}from"./app-DM5lWH7w.js";import{D,a as E,b as w,c as N}from"./dialog-_yQDYPAD.js";import{B as g}from"./button-D_azY7HU.js";import{I as S}from"./input-C9qzQYtQ.js";import{L as v}from"./label-Dh85IkX1.js";import{T}from"./textarea-V4QGxS2H.js";import{A as C,a as F}from"./alert-cZJMHzEk.js";import"./index-v8iwHGUi.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./index-H22tECQ6.js";function J({material:r,onClose:d,onSuccess:b}){const[s,l]=i.useState({name:"",description:""}),[c,m]=i.useState(!1),[n,p]=i.useState({}),[h,x]=i.useState("");i.useEffect(()=>{r&&l({name:r.name||"",description:r.description||""})},[r]);const y=async t=>{var u,f;t.preventDefault(),m(!0),p({}),x("");try{if(r){const a={};Object.keys(s).forEach(o=>{s[o]!==r[o]&&(a[o]=s[o])}),await j.post(`/admin/materials/${r.id}`,a)}else await j.post("/admin/materials",s);b()}catch(a){(f=(u=a.response)==null?void 0:u.data)!=null&&f.errors?p(a.response.data.errors):x("An error occurred while saving the material. Please try again."),console.error("Error submitting material:",a)}finally{m(!1)}};return e.jsx(D,{open:!0,onOpenChange:d,children:e.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(w,{children:e.jsx(N,{children:r?"Chỉnh sửa":"Tạo mới"})}),h&&e.jsx(C,{variant:"destructive",children:e.jsx(F,{children:h})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"name",children:"Tên"}),e.jsx(S,{id:"name",value:s.name,onChange:t=>l({...s,name:t.target.value}),required:!0,placeholder:""}),n.name&&e.jsx("span",{className:"text-red-500 text-sm",children:n.name})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"description",children:"Mô tả"}),e.jsx(T,{id:"description",value:s.description,onChange:t=>l({...s,description:t.target.value}),rows:4,placeholder:""}),n.description&&e.jsx("span",{className:"text-red-500 text-sm",children:n.description})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:d,disabled:c,children:"Hủy"}),e.jsx(g,{type:"submit",disabled:c,className:"min-w-[100px]",children:c?"Saving...":"Tạo mới"})]})]})]})})}export{J as default};
