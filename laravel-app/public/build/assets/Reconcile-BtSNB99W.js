import{m as C,j as e,L as M}from"./app-DM5lWH7w.js";import{A as k,B as P}from"./Breadcrumb-DriWI8JK.js";import{B as m}from"./button-D_azY7HU.js";import{I as v}from"./input-C9qzQYtQ.js";import{T as j,a as g,b as r,c as d,d as u,e as l}from"./table-BGT-YAZs.js";import"./shopping-cart-CZJG6TeG.js";import"./index-H22tECQ6.js";import"./utils-De8wPBUk.js";import"./star-NL1IKTr_.js";import"./truck-PZjfZowP.js";import"./shopping-bag-D-8jhm6x.js";import"./users-Bg5QJiIM.js";import"./search-DZ4Pfh-R.js";import"./user-DrHZ__g_.js";function F({matched:i,unmatched:a,missingInSystem:c,missingInVnpay:h,summary:o,date_range:t}){const{data:b,setData:w,post:y,processing:p,errors:x}=C({start_date:(t==null?void 0:t.start_date)||"",end_date:(t==null?void 0:t.end_date)||""}),N=s=>{w(s.target.name,s.target.value)},_=s=>{s.preventDefault(),y(route("admin.payments.reconcile-vnpay.process"))},T=[{label:"Quản lý",href:"/admin"},{label:"Thanh toán",href:"/admin/payments"},{label:"Đối soát VNPay",href:"/admin/payments/reconcile-vnpay"}];return e.jsxs(k,{children:[e.jsx(M,{title:"Đối soát VNPay"}),e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsx(P,{items:T}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Đối soát VNPay"})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6 mb-6",children:e.jsx("form",{onSubmit:_,className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Từ ngày"}),e.jsx(v,{type:"date",name:"start_date",value:b.start_date,onChange:N,required:!0}),x.start_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Đến ngày"}),e.jsx(v,{type:"date",name:"end_date",value:b.end_date,onChange:N,required:!0}),x.end_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:x.end_date})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(m,{type:"submit",className:"w-full",disabled:p,children:p?"Đang xử lý...":"Đối soát"})})]})})}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Khớp"}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-green-600",children:o.matched_count})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Không khớp"}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-red-600",children:o.unmatched_count})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Thiếu trong hệ thống"}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-yellow-600",children:o.missing_in_system_count})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Thiếu trong VNPay"}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-blue-600",children:o.missing_in_vnpay_count})]})]}),i&&i.length>0&&e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg mb-6",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h2",{className:"text-xl font-medium text-gray-900",children:["Giao dịch khớp (",i.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(r,{children:[e.jsx(d,{children:"Mã giao dịch"}),e.jsx(d,{children:"Mã đơn hàng"}),e.jsx(d,{children:"Số tiền"}),e.jsx(d,{children:"Thời gian"}),e.jsx(d,{children:"Trạng thái"})]})}),e.jsx(u,{children:i.map((s,n)=>e.jsxs(r,{className:"bg-green-50",children:[e.jsx(l,{children:s.transaction_id}),e.jsx(l,{children:s.order_id}),e.jsx(l,{children:formatCurrency(s.amount)}),e.jsx(l,{children:s.time}),e.jsx(l,{children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:s.status})})]},n))})]})})]}),a&&a.length>0&&e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg mb-6",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h2",{className:"text-xl font-medium text-gray-900",children:["Giao dịch không khớp (",a.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(r,{children:[e.jsx(d,{children:"Mã giao dịch"}),e.jsx(d,{children:"Mã đơn hàng"}),e.jsx(d,{children:"Số tiền VNPay"}),e.jsx(d,{children:"Số tiền hệ thống"}),e.jsx(d,{children:"Chênh lệch"}),e.jsx(d,{children:"Thao tác"})]})}),e.jsx(u,{children:a.map((s,n)=>e.jsxs(r,{className:"bg-red-50",children:[e.jsx(l,{children:s.vnpay.transaction_id}),e.jsx(l,{children:s.vnpay.order_id}),e.jsx(l,{children:formatCurrency(s.vnpay.amount)}),e.jsx(l,{children:formatCurrency(s.system.amount)}),e.jsx(l,{className:s.difference>0?"text-red-600":"text-green-600",children:formatCurrency(s.difference)}),e.jsx(l,{children:e.jsx(m,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-600",children:"Cập nhật"})})]},n))})]})})]}),c&&c.length>0&&e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg mb-6",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h2",{className:"text-xl font-medium text-gray-900",children:["Giao dịch thiếu trong hệ thống (",c.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(r,{children:[e.jsx(d,{children:"Mã giao dịch"}),e.jsx(d,{children:"Mã đơn hàng"}),e.jsx(d,{children:"Số tiền"}),e.jsx(d,{children:"Thời gian"}),e.jsx(d,{children:"Thao tác"})]})}),e.jsx(u,{children:c.map((s,n)=>e.jsxs(r,{className:"bg-yellow-50",children:[e.jsx(l,{children:s.transaction_id}),e.jsx(l,{children:s.order_id}),e.jsx(l,{children:formatCurrency(s.amount)}),e.jsx(l,{children:s.time}),e.jsx(l,{children:e.jsx(m,{variant:"outline",size:"sm",className:"text-green-600 border-green-600",children:"Thêm vào hệ thống"})})]},n))})]})})]}),h&&h.length>0&&e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h2",{className:"text-xl font-medium text-gray-900",children:["Giao dịch thiếu trong VNPay (",h.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(r,{children:[e.jsx(d,{children:"Mã giao dịch"}),e.jsx(d,{children:"Mã đơn hàng"}),e.jsx(d,{children:"Số tiền"}),e.jsx(d,{children:"Thời gian"}),e.jsx(d,{children:"Thao tác"})]})}),e.jsx(u,{children:h.map((s,n)=>{var f;return e.jsxs(r,{className:"bg-blue-50",children:[e.jsx(l,{children:s.transaction_id}),e.jsx(l,{children:((f=s.order)==null?void 0:f.order_id)||"N/A"}),e.jsx(l,{children:formatCurrency(s.amount)}),e.jsx(l,{children:new Date(s.created_at).toLocaleString("vi-VN")}),e.jsx(l,{children:e.jsx(m,{variant:"outline",size:"sm",className:"text-red-600 border-red-600",children:"Kiểm tra"})})]},n)})})]})})]}),!i&&!a&&!c&&!h&&e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:'Vui lòng chọn khoảng thời gian và nhấn "Đối soát" để bắt đầu.'})})]})]})}export{F as default};
