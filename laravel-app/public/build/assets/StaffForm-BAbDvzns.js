import{r as N,j as r,a as C}from"./app-DM5lWH7w.js";import{D,a as w,b as k,c as T}from"./dialog-_yQDYPAD.js";import{B as j}from"./button-D_azY7HU.js";import{I as o}from"./input-C9qzQYtQ.js";import"./index-v8iwHGUi.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./index-H22tECQ6.js";const R=({staff:e,roles:v,onClose:d,onSuccess:g})=>{var m,s,c,t,u;const[i,n]=N.useState({name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||"",username:(e==null?void 0:e.username)||"",password:"",role_id:(e==null?void 0:e.role_id)||"",is_active:(e==null?void 0:e.is_active)??!0,profile:{full_name:((m=e==null?void 0:e.profile)==null?void 0:m.full_name)||"",gender:((s=e==null?void 0:e.profile)==null?void 0:s.gender)||"",date_of_birth:((c=e==null?void 0:e.profile)==null?void 0:c.date_of_birth)||"",phone:((t=e==null?void 0:e.profile)==null?void 0:t.phone)||"",avatar_url:((u=e==null?void 0:e.profile)==null?void 0:u.avatar_url)||""}}),_=async l=>{var h,p;l.preventDefault();const b={...i,role_id:i.role_id?parseInt(i.role_id):null,is_active:!!i.is_active};try{const a=e?"put":"post",y=e?`/admin/users/${e.id}`:"/admin/users",x=await C({method:a,url:y,data:b});(x.status===200||x.status===201)&&(g(),alert(e?"Cập nhật thành công!":"Thêm mới thành công!"),d())}catch(a){console.error("Lỗi:",a),alert(((p=(h=a.response)==null?void 0:h.data)==null?void 0:p.message)||"Có lỗi xảy ra")}};return r.jsx(D,{open:!0,onOpenChange:d,children:r.jsxs(w,{className:"max-w-2xl",children:[r.jsx(k,{children:r.jsx(T,{children:e?"Cập nhật nhân viên":"Thêm nhân viên mới"})}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Tên hiển thị"}),r.jsx(o,{value:i.name,onChange:l=>n({...i,name:l.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Tên đầy đủ"}),r.jsx(o,{value:i.profile.full_name,onChange:l=>n({...i,profile:{...i.profile,full_name:l.target.value}}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Email"}),r.jsx(o,{type:"email",value:i.email,onChange:l=>n({...i,email:l.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium",children:["Mật khẩu ",e&&"(để trống nếu không đổi)"]}),r.jsx(o,{type:"password",value:i.password,onChange:l=>n({...i,password:l.target.value}),required:!e})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Vai trò"}),r.jsxs("select",{className:"w-full px-3 py-2 border rounded-md",value:i.role_id,onChange:l=>n({...i,role_id:l.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Chọn vai trò"}),v.map(l=>r.jsx("option",{value:l.role_id,children:l.name},l.role_id))]})]}),r.jsx("div",{className:"col-span-2",children:r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:i.is_active,onChange:l=>n({...i,is_active:l.target.checked}),className:"rounded border-gray-300"}),r.jsx("span",{children:"Hoạt động"})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(j,{type:"button",variant:"outline",onClick:d,children:"Hủy"}),r.jsx(j,{type:"submit",children:e?"Cập nhật":"Thêm mới"})]})]})]})})};export{R as default};
