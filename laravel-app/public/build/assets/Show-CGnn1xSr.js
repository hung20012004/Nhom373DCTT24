import{r as h,j as e,L as b,$ as m,S as x}from"./app-DM5lWH7w.js";import{L as C}from"./Layout-DVh4xpEi.js";import{C as g,a as j,b as p,d as w,c as u}from"./card-DjyVTpSh.js";import{B as i}from"./button-D_azY7HU.js";import{B as D}from"./badge-D2PfSuDc.js";import{S}from"./separator-D-j3PisJ.js";import{D as _,e as k,a as L,b as B,c as T,f as V,d as $}from"./dialog-_yQDYPAD.js";import{u as H}from"./use-toast-CcV5NpMB.js";import{A as M}from"./arrow-left-D2uTfI0H.js";import{S as A}from"./shopping-bag-D-8jhm6x.js";import{C as E}from"./circle-alert-DyacK_RC.js";import{c as I}from"./index-H22tECQ6.js";import{C as O}from"./circle-check-big-CYwe5r7P.js";import{C as F}from"./clock-DhlBCZ0t.js";import{M as K}from"./message-circle-Cm95Jnj2.js";import"./index-o3Sz-yc3.js";import"./index-v8iwHGUi.js";import"./trash-2-Dy2jXSrq.js";import"./plus-DECCMGFS.js";import"./alert-cZJMHzEk.js";import"./checkbox-D22MXWb1.js";import"./utils-De8wPBUk.js";import"./index-B4EdUvDt.js";import"./index-ijvaBZ7a.js";import"./check-Ct5f1nwX.js";import"./shopping-cart-CZJG6TeG.js";import"./search-DZ4Pfh-R.js";import"./user-DrHZ__g_.js";import"./x-ToVJaZZw.js";import"./mail-CpnXhq4x.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=I("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),l=s=>new Date(s).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),fe=({supportRequest:s})=>{const[y,t]=h.useState(!1),[c,r]=h.useState(!1),{toast:d}=H(),n=a=>{switch(a){case"new":return{label:"Mới tạo",color:"bg-blue-500"};case"in_progress":return{label:"Đang xử lý",color:"bg-yellow-500"};case"resolved":return{label:"Đã giải quyết",color:"bg-green-500"};case"closed":return{label:"Đã đóng",color:"bg-gray-500"};default:return{label:"Không xác định",color:"bg-gray-500"}}},o=a=>{switch(a){case"shipping":return"Vấn đề vận chuyển";case"product":return"Vấn đề sản phẩm";case"payment":return"Vấn đề thanh toán";case"other":return"Vấn đề khác";default:return"Không xác định"}},f=a=>{switch(a){case"new":return e.jsx(K,{className:"h-6 w-6"});case"in_progress":return e.jsx(F,{className:"h-6 w-6"});case"resolved":return e.jsx(O,{className:"h-6 w-6"});case"closed":return e.jsx(X,{className:"h-6 w-6"});default:return e.jsx(E,{className:"h-6 w-6"})}},N=()=>{r(!0),x.post(`/support-requests/${s.id}/cancel`,{},{onSuccess:()=>{r(!1),t(!1),d({title:"Thành công",description:"Yêu cầu hỗ trợ đã được hủy thành công."}),x.reload()},onError:a=>{r(!1),d({title:"Lỗi",description:a.error||"Đã xảy ra lỗi khi hủy yêu cầu",variant:"destructive"})},onFinish:()=>{r(!1)}})},v=["new","in_progress"].includes(s.status);return e.jsxs(C,{children:[e.jsx(b,{title:`Chi tiết yêu cầu hỗ trợ #${s.id}`}),e.jsxs("div",{className:"max-w-6xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(i,{asChild:!0,variant:"ghost",className:"p-0 mb-2",children:e.jsxs(m,{href:"/support-requests",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Quay lại danh sách yêu cầu hỗ trợ"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:["Yêu cầu hỗ trợ #",s.id,e.jsx(D,{className:`ml-3 ${n(s.status).color} text-white`,children:n(s.status).label})]}),e.jsxs("p",{className:"text-gray-600 mt-1 md:mt-0",children:["Ngày tạo: ",l(s.created_at)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsx(p,{className:"text-xl",children:"Nội dung yêu cầu"}),e.jsxs(w,{children:["Loại vấn đề: ",o(s.issue_type)]})]}),e.jsxs(u,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-gray-700 whitespace-pre-wrap",children:s.description}),s.resolved_at&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Thời gian giải quyết:"}),e.jsx("p",{className:"text-gray-600",children:l(s.resolved_at)})]}),s.admin_notes&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Ghi chú từ nhân viên hỗ trợ:"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-md text-gray-700 whitespace-pre-wrap",children:s.admin_notes})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(p,{className:"text-xl",children:"Thông tin chi tiết"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Trạng thái:"}),e.jsxs("p",{className:"font-medium flex items-center",children:[f(s.status),e.jsx("span",{className:"ml-2",children:n(s.status).label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Loại vấn đề:"}),e.jsx("p",{className:"font-medium",children:o(s.issue_type)})]}),e.jsx(S,{}),s.order_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Đơn hàng liên quan:"}),e.jsxs(m,{href:`/order/${s.order_id}`,className:"font-medium text-blue-600 hover:text-blue-800 flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Đơn hàng #",s.order_id]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ngày tạo:"}),e.jsx("p",{className:"font-medium",children:l(s.created_at)})]}),s.resolver&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nhân viên hỗ trợ:"}),e.jsx("p",{className:"font-medium",children:s.resolver.name})]})]})})]}),v&&e.jsx("div",{className:"flex flex-col space-y-3",children:e.jsxs(_,{open:y,onOpenChange:t,children:[e.jsx(k,{asChild:!0,children:e.jsx(i,{variant:"destructive",className:"w-full",children:"Hủy yêu cầu"})}),e.jsxs(L,{className:"sm:max-w-md",children:[e.jsxs(B,{children:[e.jsx(T,{children:"Xác nhận hủy yêu cầu hỗ trợ"}),e.jsx(V,{children:"Bạn có chắc chắn muốn hủy yêu cầu hỗ trợ này? Hành động này không thể hoàn tác."})]}),e.jsxs($,{children:[e.jsx(i,{variant:"outline",onClick:()=>t(!1),disabled:c,children:"Đóng"}),e.jsx(i,{variant:"destructive",onClick:N,disabled:c,children:c?"Đang hủy...":"Xác nhận hủy"})]})]})]})})]})]})]})]})};export{fe as default};
