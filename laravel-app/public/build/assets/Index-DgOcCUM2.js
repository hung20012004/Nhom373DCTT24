import{r,j as e,L as A,a as v}from"./app-DM5lWH7w.js";import{A as D,B as I}from"./Breadcrumb-DriWI8JK.js";import{B as d}from"./button-D_azY7HU.js";import{I as L}from"./input-C9qzQYtQ.js";import{T as M,a as P,b as m,c as f,d as R,e as o}from"./table-BGT-YAZs.js";import X from"./ColorForm-AYMoCuQQ.js";import{A as $}from"./arrow-up-down-BlfunGSh.js";import"./shopping-cart-CZJG6TeG.js";import"./index-H22tECQ6.js";import"./utils-De8wPBUk.js";import"./star-NL1IKTr_.js";import"./truck-PZjfZowP.js";import"./shopping-bag-D-8jhm6x.js";import"./users-Bg5QJiIM.js";import"./search-DZ4Pfh-R.js";import"./user-DrHZ__g_.js";import"./dialog-_yQDYPAD.js";import"./index-v8iwHGUi.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./label-Dh85IkX1.js";import"./alert-cZJMHzEk.js";function me(){const[l,j]=r.useState([]),[w,y]=r.useState(!0),[x,_]=r.useState(""),[S,n]=r.useState(!1),[C,c]=r.useState(null),[a,b]=r.useState({current_page:1,per_page:10,total:0,last_page:1}),[p,T]=r.useState("name"),[u,N]=r.useState("asc"),h=async()=>{try{y(!0);const t=await v.get("/api/v1/colors",{params:{search:x,page:a.current_page,per_page:a.per_page,sort_field:p,sort_direction:u}});t.data&&t.data.data&&(j(t.data.data),b({current_page:t.data.current_page,per_page:t.data.per_page,total:t.data.total,last_page:t.data.last_page}))}catch(t){console.error("Error fetching colors:",t),j([])}finally{y(!1)}};r.useEffect(()=>{const t=setTimeout(()=>{h()},300);return()=>clearTimeout(t)},[x,a.current_page,p,u]);const k=t=>{p===t?N(u==="asc"?"desc":"asc"):(T(t),N("asc"))},E=async t=>{var s,i;if(confirm("Bạn có xác nhận xóa?"))try{(await v.delete(`/admin/colors/${t}`)).status===200&&(h(),alert("Xóa thành công"))}catch(g){console.error("Error deleting color:",g),alert(((i=(s=g.response)==null?void 0:s.data)==null?void 0:i.message)||`Error deleting color ${t}`)}},B=[{label:"Màu sắc",href:"/admin/colors"}],F=()=>{const t=[];for(let s=1;s<=a.last_page;s++)t.push(e.jsx(d,{variant:a.current_page===s?"default":"outline",className:"w-10 h-10",onClick:()=>b(i=>({...i,current_page:s})),children:s},s));return t},H=({field:t,children:s})=>e.jsx(f,{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>k(t),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:s}),e.jsx($,{className:"w-4 h-4"})]})});return e.jsxs(D,{children:[e.jsx(A,{title:"Màu sắc"}),e.jsxs("div",{className:"container mx-auto py-6 px-4",children:[e.jsx(I,{items:B}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quản lý màu sắc"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[e.jsx(L,{type:"text",placeholder:"Tìm kiếm...",value:x,onChange:t=>_(t.target.value),className:"w-full sm:w-64"}),e.jsx(d,{onClick:()=>{c(null),n(!0)},children:"Thêm mới"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(M,{children:[e.jsx(P,{children:e.jsxs(m,{className:"bg-gray-50",children:[e.jsx(H,{field:"name",children:"Tên màu"}),e.jsx(f,{className:"py-3 px-6 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Màu sắc"}),e.jsx(f,{className:"py-3 px-6 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hành động"})]})}),e.jsx(R,{children:w?e.jsx(m,{children:e.jsx(o,{colSpan:3,className:"text-center py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})})})}):!l||l.length===0?e.jsx(m,{children:e.jsx(o,{colSpan:3,className:"text-center py-4 text-gray-500",children:"No colors found"})}):l.map(t=>e.jsxs(m,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(o,{className:"py-4 px-6 text-sm text-gray-900",children:t.name}),e.jsx(o,{className:"py-4 px-6 text-center text-sm text-gray-900",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full border border-gray-300",style:{backgroundColor:t.description}})})}),e.jsx(o,{className:"py-4 px-6 text-sm text-gray-900",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(d,{variant:"outline",className:"text-blue-600 hover:text-blue-700 border border-blue-600 hover:border-blue-700",onClick:()=>{c(t),n(!0)},children:"Chỉnh sửa"}),e.jsx(d,{variant:"destructive",className:"bg-red-600 text-center hover:bg-red-700 text-white",onClick:()=>E(t.id),children:"Xóa"})]})})]},t.id))})]})}),e.jsxs("div",{className:"flex justify-between items-center p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Hiển thị ",l.length," trên ",a.total," kết quả"]}),e.jsx("div",{className:"flex gap-2",children:F()})]})]}),S&&e.jsx(X,{color:C,onClose:()=>{n(!1),c(null)},onSuccess:()=>{n(!1),c(null),h()}})]})]})}export{me as default};
