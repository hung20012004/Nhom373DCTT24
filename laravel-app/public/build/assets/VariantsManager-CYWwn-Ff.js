import{r as v,j as e}from"./app-DM5lWH7w.js";import{B as j}from"./button-D_azY7HU.js";import{I as p}from"./input-C9qzQYtQ.js";import{L as d}from"./label-Dh85IkX1.js";import{S as u,a as _,b as g,c as C,d as N}from"./select-lTbdTkTd.js";import{T as y,a as k,b as f,c as a,d as z,e as n}from"./table-BGT-YAZs.js";import{C as T,c as V}from"./card-DjyVTpSh.js";import{T as q}from"./trash-B9vdY9Sb.js";import{P as w}from"./plus-DECCMGFS.js";import"./index-H22tECQ6.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-v8iwHGUi.js";import"./index-BeqeRdpr.js";import"./index-o3Sz-yc3.js";import"./check-Ct5f1nwX.js";const Q=({variants:o,setVariants:m,sizes:h,colors:x})=>{const[s,l]=v.useState({size_id:"",color_id:"",price:"",stock_quantity:""}),b=()=>{if(!s.size_id||!s.color_id||!s.price||!s.stock_quantity)return;if(o.some(t=>t.size_id.toString()===s.size_id.toString()&&t.color_id.toString()===s.color_id.toString())){alert("A variant with this size and color combination already exists.");return}const r=`temp-${Date.now()}`;m(t=>[...t,{id:r,size_id:s.size_id,color_id:s.color_id,price:s.price,stock_quantity:s.stock_quantity,size:h.find(c=>c.id.toString()===s.size_id.toString()),color:x.find(c=>c.id.toString()===s.color_id.toString())}]),l({size_id:"",color_id:"",price:"",stock_quantity:""})},S=i=>{m(r=>r.filter(t=>t.id!==i))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Biến thể sản phẩm"}),o.length>0&&e.jsxs(y,{children:[e.jsx(k,{children:e.jsxs(f,{children:[e.jsx(a,{children:"Kích cỡ"}),e.jsx(a,{children:"Màu sắc"}),e.jsx(a,{children:"Giá (VND)"}),e.jsx(a,{children:"Số lượng"}),e.jsx(a,{className:"text-right",children:"Hành động"})]})}),e.jsx(z,{children:o.map(i=>{var r,t,c;return e.jsxs(f,{children:[e.jsx(n,{children:((r=i.size)==null?void 0:r.name)||"Không rõ"}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:((t=i.color)==null?void 0:t.description)||"#CCCCCC"}}),((c=i.color)==null?void 0:c.name)||"Không rõ"]})}),e.jsx(n,{children:Intl.NumberFormat("vi-VN").format(i.price)}),e.jsx(n,{children:i.stock_quantity}),e.jsx(n,{className:"text-right",children:e.jsx(j,{type:"button",variant:"destructive",size:"sm",onClick:()=>S(i.id),children:e.jsx(q,{className:"h-4 w-4"})})})]},i.id)})})]}),e.jsx(T,{children:e.jsxs(V,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"size_id",children:"Kích cỡ"}),e.jsxs(u,{value:s.size_id,onValueChange:i=>l(r=>({...r,size_id:i})),children:[e.jsx(_,{className:"mt-1",children:e.jsx(g,{placeholder:"Chọn kích cỡ"})}),e.jsx(C,{children:h.map(i=>e.jsx(N,{value:i.id.toString(),children:i.name},i.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"color_id",children:"Màu sắc"}),e.jsxs(u,{value:s.color_id,onValueChange:i=>l(r=>({...r,color_id:i})),children:[e.jsx(_,{className:"mt-1",children:e.jsx(g,{placeholder:"Chọn màu sắc"})}),e.jsx(C,{children:x.map(i=>e.jsx(N,{value:i.id.toString(),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:i.description}}),i.name]})},i.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"variant_price",children:"Giá (VND)"}),e.jsx(p,{id:"variant_price",type:"number",value:s.price,onChange:i=>l(r=>({...r,price:i.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"variant_stock",children:"Số lượng"}),e.jsx(p,{id:"variant_stock",type:"number",value:s.stock_quantity,onChange:i=>l(r=>({...r,stock_quantity:i.target.value})),className:"mt-1"})]})]}),e.jsxs(j,{type:"button",className:"mt-4",onClick:b,disabled:!s.size_id||!s.color_id||!s.price||!s.stock_quantity,children:[e.jsx(w,{className:"h-4 w-4 mr-1"})," Thêm biến thể"]})]})})]})};export{Q as default};
