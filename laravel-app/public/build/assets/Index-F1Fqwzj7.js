import{r as i,j as e,L as S,$ as n}from"./app-DM5lWH7w.js";import{L as T}from"./Layout-DVh4xpEi.js";import{C as x,a as k,b as L,c as B}from"./card-DjyVTpSh.js";import{B as c}from"./button-D_azY7HU.js";import{B as u}from"./badge-D2PfSuDc.js";import{I}from"./input-C9qzQYtQ.js";import{S as _}from"./search-DZ4Pfh-R.js";import{c as V}from"./index-H22tECQ6.js";import{C as K}from"./calendar-D95ocz5F.js";import{C as $}from"./clock-DhlBCZ0t.js";import"./index-o3Sz-yc3.js";import"./index-v8iwHGUi.js";import"./dialog-_yQDYPAD.js";import"./utils-De8wPBUk.js";import"./index-ijvaBZ7a.js";import"./index-B4EdUvDt.js";import"./x-ToVJaZZw.js";import"./trash-2-Dy2jXSrq.js";import"./plus-DECCMGFS.js";import"./alert-cZJMHzEk.js";import"./checkbox-D22MXWb1.js";import"./check-Ct5f1nwX.js";import"./shopping-cart-CZJG6TeG.js";import"./user-DrHZ__g_.js";import"./mail-CpnXhq4x.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=V("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),ce=({supportRequests:g})=>{const[s,v]=i.useState(""),[l,b]=i.useState("all"),[t,y]=i.useState("all"),o=g.filter(a=>{const r=a.id.toString().includes(s)||a.description.toLowerCase().includes(s.toLowerCase())||a.order&&a.order.id.toString().includes(s),w=l==="all"||a.status===l,C=t==="all"||a.issue_type===t;return r&&w&&C}),m=a=>{switch(a){case"new":return{label:"Mới",color:"bg-blue-500"};case"in_progress":return{label:"Đang xử lý",color:"bg-yellow-500"};case"resolved":return{label:"Đã giải quyết",color:"bg-green-500"};case"closed":return{label:"Đã đóng",color:"bg-gray-500"};default:return{label:"Không xác định",color:"bg-gray-400"}}},d=a=>{switch(a){case"shipping":return{label:"Vấn đề vận chuyển",color:"bg-purple-500"};case"product":return{label:"Vấn đề sản phẩm",color:"bg-indigo-500"};case"payment":return{label:"Vấn đề thanh toán",color:"bg-orange-500"};case"other":return{label:"Khác",color:"bg-teal-500"};default:return{label:"Không xác định",color:"bg-gray-400"}}},h=a=>new Date(a).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j=(a,r=100)=>a?a.length>r?a.slice(0,r)+"...":a:"",f=[{value:"all",label:"Tất cả"},{value:"new",label:"Mới"},{value:"in_progress",label:"Đang xử lý"},{value:"resolved",label:"Đã giải quyết"},{value:"closed",label:"Đã đóng"}],N=[{value:"all",label:"Tất cả các vấn đề"},{value:"shipping",label:"Vấn đề vận chuyển"},{value:"product",label:"Vấn đề sản phẩm"},{value:"payment",label:"Vấn đề thanh toán"},{value:"other",label:"Khác"}];return e.jsxs(T,{children:[e.jsx(S,{title:"Yêu cầu hỗ trợ của tôi"}),e.jsx("div",{className:"max-w-6xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsxs(x,{children:[e.jsxs(k,{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-2xl font-bold mb-1",children:"Yêu cầu hỗ trợ của tôi"}),e.jsx("p",{className:"text-gray-600",children:"Theo dõi và quản lý các yêu cầu hỗ trợ của bạn"})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(_,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(I,{placeholder:"Tìm kiếm yêu cầu...",className:"pl-8",value:s,onChange:a=>v(a.target.value)})]})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Trạng thái:"}),e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto pb-2",children:f.map(a=>e.jsx(c,{variant:l===a.value?"default":"outline",onClick:()=>b(a.value),className:l===a.value?"text-white":"",size:"sm",children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Loại vấn đề:"}),e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto pb-2",children:N.map(a=>e.jsx(c,{variant:t===a.value?"default":"outline",onClick:()=>y(a.value),className:t===a.value?"text-white":"",size:"sm",children:a.label},a.value))})]})]}),o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(a=>e.jsxs(x,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 p-4 flex flex-col md:flex-row justify-between items-start md:items-center border-b",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-y-2",children:[e.jsx(p,{className:"h-5 w-5 text-gray-600"}),e.jsxs("h3",{className:"font-semibold",children:["Yêu cầu hỗ trợ #",a.id]}),e.jsx(u,{className:m(a.status).color+" text-white",children:m(a.status).label}),e.jsx(u,{className:d(a.issue_type).color+" text-white",children:d(a.issue_type).label})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mt-1",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:h(a.created_at)})]})]}),a.order&&e.jsxs("div",{className:"mt-2 md:mt-0 text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:"Liên quan đến đơn hàng:"}),e.jsxs(n,{href:`/order/${a.order.id}`,className:"text-blue-600 hover:text-blue-800",children:["#",a.order.id]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Nội dung yêu cầu:"}),e.jsx("p",{className:"text-gray-700 mb-4",children:j(a.description)}),a.status==="resolved"&&a.resolved_at&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4",children:[e.jsx($,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Đã giải quyết vào: ",h(a.resolved_at)]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(c,{asChild:!0,variant:"outline",children:e.jsx(n,{href:`/support-requests/${a.id}`,children:"Xem chi tiết"})})})]})]},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Không tìm thấy yêu cầu hỗ trợ"}),e.jsx("p",{className:"mt-1 text-gray-500",children:s||l!=="all"||t!=="all"?"Không tìm thấy yêu cầu hỗ trợ phù hợp với tìm kiếm của bạn.":"Bạn chưa có yêu cầu hỗ trợ nào."}),s===""&&l==="all"&&t==="all"&&e.jsx("div",{className:"mt-6",children:e.jsx(c,{asChild:!0,children:e.jsx(n,{href:"/support-requests/create",children:"Tạo yêu cầu hỗ trợ mới"})})})]})]})]})})]})};export{ce as default};
